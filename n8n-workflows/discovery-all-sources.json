{
  "name": "FlipOps - Discovery (All Sources)",
  "active": true,
  "nodes": [
    {
      "id": "cron_trigger",
      "name": "Daily 2AM Trigger",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 200],
      "parameters": {
        "triggerTimes": {
          "item": [{
            "mode": "everyDay",
            "hour": 2,
            "minute": 0
          }]
        }
      }
    },
    {
      "id": "manual_trigger",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [100, 400]
    },
    {
      "id": "merge_triggers",
      "name": "Merge Triggers",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2,
      "position": [300, 300],
      "parameters": {
        "mode": "combine",
        "mergeByFields": {
          "values": []
        },
        "options": {}
      }
    },
    {
      "id": "google_sheets",
      "name": "Google Sheets - Manual Leads",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 2,
      "position": [500, 100],
      "parameters": {
        "operation": "read",
        "documentId": {
          "__rl": true,
          "value": "1TwEzCOn-2FygrJ3jSTixzXgdknMmn-I_AiuHaCPjJKY",
          "mode": "id"
        },
        "sheetName": {
          "__rl": true,
          "value": "ManualLeads",
          "mode": "name"
        },
        "options": {}
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "{{GOOGLE_SHEETS_CREDENTIAL_ID}}",
          "name": "Google Sheets OAuth2"
        }
      }
    },
    {
      "id": "normalize_sheets",
      "name": "Normalize Google Sheets",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [700, 100],
      "parameters": {
        "functionCode": "return items.map(item => {\n  const data = item.json;\n  return {\n    json: {\n      type: 'property',\n      source: 'google-sheets-manual',\n      property: {\n        address1: data.address || '',\n        city: data.city || '',\n        state: data.state || '',\n        zip: data.zip || '',\n        apn: data.apn || null,\n        ownerName: data.ownerName || null\n      },\n      flags: {\n        foreclosure: data.foreclosure === true || data.foreclosure === 'true',\n        preForeclosure: data.preForeclosure === true || data.preForeclosure === 'true',\n        taxDelinquent: data.taxDelinquent === true || data.taxDelinquent === 'true',\n        vacant: data.vacant === true || data.vacant === 'true',\n        bankruptcy: data.bankruptcy === true || data.bankruptcy === 'true',\n        absenteeOwner: data.absenteeOwner === true || data.absenteeOwner === 'true'\n      },\n      metadata: {\n        scrapeUrl: null,\n        recordedAt: data.recordedAt || null,\n        ingestedAt: new Date().toISOString(),\n        raw: data\n      }\n    }\n  };\n});"
      }
    },
    {
      "id": "fetch_tax_csv",
      "name": "Fetch Tax Delinquent CSV",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [500, 250],
      "parameters": {
        "method": "GET",
        "url": "={{$env.TAX_CSV_URL || 'https://example.com/tax-delinquent.csv'}}",
        "options": {
          "timeout": 30000,
          "response": {
            "response": {
              "responseFormat": "text"
            }
          }
        }
      }
    },
    {
      "id": "parse_tax_csv",
      "name": "Parse Tax CSV",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [700, 250],
      "parameters": {
        "functionCode": "const csv = items[0].json;\nconst lines = csv.split('\\n');\nconst headers = lines[0].split(',').map(h => h.trim());\nconst results = [];\n\nfor (let i = 1; i < lines.length; i++) {\n  if (!lines[i].trim()) continue;\n  const values = lines[i].split(',');\n  const row = {};\n  headers.forEach((h, idx) => {\n    row[h] = values[idx] ? values[idx].trim() : '';\n  });\n  \n  results.push({\n    json: {\n      type: 'property',\n      source: 'miami-dade-tax',\n      property: {\n        address1: row.address || row.ADDRESS || '',\n        city: row.city || row.CITY || '',\n        state: row.state || row.STATE || 'FL',\n        zip: row.zip || row.ZIP || '',\n        apn: row.apn || row.APN || row.parcel || null,\n        ownerName: row.owner || row.OWNER || null\n      },\n      flags: {\n        foreclosure: false,\n        preForeclosure: false,\n        taxDelinquent: true,\n        vacant: false,\n        bankruptcy: false,\n        absenteeOwner: false\n      },\n      metadata: {\n        scrapeUrl: '{{TAX_CSV_URL}}',\n        recordedAt: row.delinquentDate || null,\n        ingestedAt: new Date().toISOString(),\n        raw: row\n      }\n    }\n  });\n}\n\nreturn results;"
      }
    },
    {
      "id": "fetch_code_violations",
      "name": "Fetch Code Violations JSON",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [500, 400],
      "parameters": {
        "method": "GET",
        "url": "={{$env.CODE_VIOLATIONS_URL || 'https://example.com/code-violations.json'}}",
        "options": {
          "timeout": 30000
        }
      }
    },
    {
      "id": "normalize_violations",
      "name": "Normalize Code Violations",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [700, 400],
      "parameters": {
        "functionCode": "const violations = Array.isArray(items[0].json) ? items[0].json : [items[0].json];\n\nreturn violations.map(v => ({\n  json: {\n    type: 'property',\n    source: 'city-code-violations',\n    property: {\n      address1: v.address || v.property_address || '',\n      city: v.city || 'Miami',\n      state: v.state || 'FL',\n      zip: v.zip || v.postal_code || '',\n      apn: v.folio || v.apn || null,\n      ownerName: v.owner_name || null\n    },\n    flags: {\n      foreclosure: false,\n      preForeclosure: false,\n      taxDelinquent: false,\n      vacant: v.is_vacant === true || v.vacant === true,\n      bankruptcy: false,\n      absenteeOwner: false\n    },\n    metadata: {\n      scrapeUrl: '{{CODE_VIOLATIONS_URL}}',\n      recordedAt: v.violation_date || null,\n      ingestedAt: new Date().toISOString(),\n      raw: v\n    }\n  }\n}));"
      }
    },
    {
      "id": "fetch_evictions",
      "name": "Fetch Evictions HTML",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [500, 550],
      "parameters": {
        "method": "GET",
        "url": "={{$env.EVICTIONS_URL || 'https://example.com/evictions.html'}}",
        "options": {
          "timeout": 30000,
          "response": {
            "response": {
              "responseFormat": "text"
            }
          }
        }
      }
    },
    {
      "id": "parse_evictions",
      "name": "Parse Evictions HTML",
      "type": "n8n-nodes-base.htmlExtract",
      "typeVersion": 1,
      "position": [700, 550],
      "parameters": {
        "extractionValues": {
          "values": [
            {
              "key": "address",
              "cssSelector": "td.address",
              "returnValue": "text"
            },
            {
              "key": "owner",
              "cssSelector": "td.owner",
              "returnValue": "text"
            },
            {
              "key": "caseNumber",
              "cssSelector": "td.case",
              "returnValue": "text"
            }
          ]
        },
        "options": {}
      }
    },
    {
      "id": "normalize_evictions",
      "name": "Normalize Evictions",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [900, 550],
      "parameters": {
        "functionCode": "return items.map(item => {\n  const data = item.json;\n  const addr = (data.address || '').split(',');\n  \n  return {\n    json: {\n      type: 'property',\n      source: 'evictions-court',\n      property: {\n        address1: addr[0] || '',\n        city: addr[1] ? addr[1].trim() : '',\n        state: 'FL',\n        zip: addr[2] ? addr[2].trim() : '',\n        apn: null,\n        ownerName: data.owner || null\n      },\n      flags: {\n        foreclosure: false,\n        preForeclosure: false,\n        taxDelinquent: false,\n        vacant: true,\n        bankruptcy: false,\n        absenteeOwner: false\n      },\n      metadata: {\n        scrapeUrl: '{{EVICTIONS_URL}}',\n        recordedAt: null,\n        ingestedAt: new Date().toISOString(),\n        raw: data\n      }\n    }\n  };\n});"
      }
    },
    {
      "id": "fetch_probate",
      "name": "Fetch Probate Records",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [500, 700],
      "parameters": {
        "method": "GET",
        "url": "={{$env.PROBATE_URL || 'https://example.com/probate.json'}}",
        "options": {
          "timeout": 30000
        }
      }
    },
    {
      "id": "normalize_probate",
      "name": "Normalize Probate",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [700, 700],
      "parameters": {
        "functionCode": "const records = Array.isArray(items[0].json) ? items[0].json : [items[0].json];\n\nreturn records.map(r => ({\n  json: {\n    type: 'property',\n    source: 'probate-docket',\n    property: {\n      address1: r.property_address || r.address || '',\n      city: r.city || '',\n      state: r.state || 'FL',\n      zip: r.zip || '',\n      apn: r.apn || null,\n      ownerName: r.deceased_name || r.owner || null\n    },\n    flags: {\n      foreclosure: false,\n      preForeclosure: false,\n      taxDelinquent: false,\n      vacant: false,\n      bankruptcy: false,\n      absenteeOwner: true\n    },\n    metadata: {\n      scrapeUrl: '{{PROBATE_URL}}',\n      recordedAt: r.filing_date || null,\n      ingestedAt: new Date().toISOString(),\n      raw: r\n    }\n  }\n}));"
      }
    },
    {
      "id": "fetch_provider_api",
      "name": "Fetch Provider API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [500, 850],
      "parameters": {
        "method": "GET",
        "url": "={{$env.PROVIDER_API_URL || 'https://api.provider.com/properties'}}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {
          "timeout": 30000
        }
      },
      "credentials": {
        "httpHeaderAuth": {
          "id": "{{PROVIDER_API_CREDENTIAL_ID}}",
          "name": "Provider API Bearer"
        }
      }
    },
    {
      "id": "normalize_provider",
      "name": "Normalize Provider API",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [700, 850],
      "parameters": {
        "functionCode": "const properties = Array.isArray(items[0].json) ? items[0].json : items[0].json.data || [items[0].json];\n\nreturn properties.map(p => ({\n  json: {\n    type: 'property',\n    source: 'provider-api',\n    property: {\n      address1: p.street_address || p.address || '',\n      city: p.city || '',\n      state: p.state || '',\n      zip: p.postal_code || p.zip || '',\n      apn: p.apn || p.parcel_number || null,\n      ownerName: p.owner_name || null\n    },\n    flags: {\n      foreclosure: p.foreclosure || false,\n      preForeclosure: p.pre_foreclosure || false,\n      taxDelinquent: p.tax_delinquent || false,\n      vacant: p.vacant || false,\n      bankruptcy: p.bankruptcy || false,\n      absenteeOwner: p.absentee_owner || false\n    },\n    metadata: {\n      scrapeUrl: '{{PROVIDER_API_URL}}',\n      recordedAt: p.listed_date || null,\n      ingestedAt: new Date().toISOString(),\n      raw: p\n    }\n  }\n}));"
      }
    },
    {
      "id": "merge_all_sources",
      "name": "Merge All Sources",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2,
      "position": [1100, 450],
      "parameters": {
        "mode": "combine",
        "mergeByFields": {
          "values": []
        },
        "options": {}
      }
    },
    {
      "id": "add_idempotency",
      "name": "Add Idempotency Keys",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1300, 450],
      "parameters": {
        "functionCode": "function norm(s) {\n  return (s || '').toUpperCase().replace(/[^\\w\\s]/g, '').replace(/\\s+/g, ' ').trim();\n}\n\nreturn items.map(item => {\n  const p = item.json.property || {};\n  const addrKey = [norm(p.address1), norm(p.city), norm(p.state), norm(p.zip)].join('|');\n  const key = p.apn ? norm(p.apn) : addrKey + '|' + norm(p.ownerName || '');\n  \n  item.json._idempotency = key;\n  item.json.metadata = item.json.metadata || {};\n  item.json.metadata.ingestedAt = new Date().toISOString();\n  \n  return item;\n});"
      }
    },
    {
      "id": "loop_dedupe",
      "name": "Loop Through Items",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 2,
      "position": [1500, 450],
      "parameters": {
        "batchSize": 1,
        "options": {}
      }
    },
    {
      "id": "check_seen",
      "name": "Check If Seen",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [1700, 450],
      "parameters": {
        "method": "GET",
        "url": "=https://flipops-api-production.up.railway.app/api/events/seen/{{$json._idempotency}}",
        "options": {
          "timeout": 5000,
          "ignore": {
            "statusCode": true
          }
        }
      }
    },
    {
      "id": "if_new",
      "name": "Is New Property?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1900, 450],
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{$json.seen}}",
              "value2": false
            }
          ]
        }
      }
    },
    {
      "id": "collect_new",
      "name": "Collect New Properties",
      "type": "n8n-nodes-base.set",
      "typeVersion": 2,
      "position": [2100, 350],
      "parameters": {
        "options": {},
        "values": {
          "string": [],
          "number": [],
          "boolean": []
        },
        "keepOnlySet": false
      }
    },
    {
      "id": "batch_for_publish",
      "name": "Batch for Publishing",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 2,
      "position": [2300, 350],
      "parameters": {
        "batchSize": 25,
        "options": {}
      }
    },
    {
      "id": "add_hmac",
      "name": "Add HMAC Signature",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [2500, 350],
      "parameters": {
        "functionCode": "const secret = '7d82e2b8945c43959699bc3a3c1467bdd66954d25d6f41eb';\nif (!secret) return items;\n\nconst crypto = require('crypto');\n\nfunction canonical(obj) {\n  const sort = v =>\n    Array.isArray(v)\n      ? v.map(sort)\n      : v && typeof v === 'object'\n        ? Object.keys(v).sort().reduce((o, k) => (o[k] = sort(v[k]), o), {})\n        : v;\n  return JSON.stringify(sort(obj));\n}\n\nreturn items.map(item => {\n  const canon = canonical(item.json);\n  const sig = crypto.createHmac('sha256', secret).update(canon).digest('hex');\n  \n  item.json._headers = {\n    'X-Fo-Sig': `v1canon=${sig}`\n  };\n  \n  return item;\n});"
      }
    },
    {
      "id": "rate_limit",
      "name": "Rate Limit",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [2700, 350],
      "parameters": {
        "resume": "timeInterval",
        "amount": 0.3,
        "unit": "seconds"
      }
    },
    {
      "id": "publish_to_scoring",
      "name": "Publish to Scoring",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [2900, 350],
      "parameters": {
        "method": "POST",
        "url": "https://flipops-api-production.up.railway.app/api/webhooks/n8n",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "x-api-key",
              "value": "fo_live_10177805c8d743e1a6e1860515dc2b3f"
            },
            {
              "name": "X-Fo-Id",
              "value": "={{$json._idempotency}}"
            },
            {
              "name": "X-Fo-Type",
              "value": "property.created"
            },
            {
              "name": "X-Fo-Version",
              "value": "1"
            },
            {
              "name": "X-Fo-Ts",
              "value": "={{Date.now()}}"
            },
            {
              "name": "X-Fo-Sig",
              "value": "={{$json._headers['X-Fo-Sig']}}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": []
        },
        "options": {
          "timeout": 30000,
          "retry": {
            "maxTries": 3,
            "waitBetweenTries": 2000
          }
        }
      }
    },
    {
      "id": "mark_seen",
      "name": "Mark as Seen",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [3100, 350],
      "parameters": {
        "method": "POST",
        "url": "https://flipops-api-production.up.railway.app/api/events/mark-seen",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "eventId",
              "value": "={{$json._idempotency}}"
            }
          ]
        },
        "options": {
          "timeout": 5000
        }
      }
    },
    {
      "id": "tally_metrics",
      "name": "Tally Metrics",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [3300, 450],
      "parameters": {
        "functionCode": "// This would aggregate all the metrics from the workflow execution\nconst metrics = {\n  total: items.length,\n  sources: {},\n  deduped: 0,\n  published: items.filter(i => i.json.published).length,\n  errors: 0,\n  timestamp: new Date().toISOString()\n};\n\n// Count by source\nitems.forEach(item => {\n  const source = item.json.source || 'unknown';\n  metrics.sources[source] = (metrics.sources[source] || 0) + 1;\n});\n\nreturn [{ json: metrics }];"
      }
    },
    {
      "id": "slack_summary",
      "name": "Slack Summary",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2,
      "position": [3500, 450],
      "parameters": {
        "resource": "message",
        "operation": "post",
        "channel": "C09JDCY5SKH",
        "text": "=üè† *FlipOps Discovery Summary*\\n\\nüìä *Metrics:*\\n‚Ä¢ Total Properties: {{$json.total}}\\n‚Ä¢ Published: {{$json.published}}\\n‚Ä¢ Deduplicated: {{$json.deduped}}\\n\\n*By Source:*\\n{{Object.entries($json.sources).map(([k,v]) => `‚Ä¢ ${k}: ${v}`).join('\\n')}}\\n\\n_Run completed at {{$json.timestamp}}_",
        "otherOptions": {}
      },
      "credentials": {
        "slackOAuth2Api": {
          "id": "{{SLACK_CREDENTIAL_ID}}",
          "name": "Slack OAuth2"
        }
      }
    },
    {
      "id": "log_notifications",
      "name": "Log to Notifications",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [3700, 450],
      "parameters": {
        "method": "POST",
        "url": "https://flipops-api-production.up.railway.app/api/notifications",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-api-key",
              "value": "fo_live_10177805c8d743e1a6e1860515dc2b3f"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "workflow_complete"
            },
            {
              "name": "workflow",
              "value": "FlipOps Discovery"
            },
            {
              "name": "metrics",
              "value": "={{$json}}"
            }
          ]
        },
        "options": {
          "timeout": 5000
        }
      }
    },
    {
      "id": "error_trigger",
      "name": "Error Trigger",
      "type": "n8n-nodes-base.errorTrigger",
      "typeVersion": 1,
      "position": [3500, 650]
    },
    {
      "id": "slack_error",
      "name": "Slack Error Alert",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2,
      "position": [3700, 650],
      "parameters": {
        "resource": "message",
        "operation": "post",
        "channel": "C09JDCY5SKH",
        "text": "=‚ùå *FlipOps Discovery Error*\\n\\n*Node:* {{$node.name}}\\n*Error:* {{$json.error.message}}\\n*Source:* {{$json.source}}\\n*URL:* {{$json.url}}\\n\\n_Timestamp: {{new Date().toISOString()}}_",
        "otherOptions": {}
      },
      "credentials": {
        "slackOAuth2Api": {
          "id": "{{SLACK_CREDENTIAL_ID}}",
          "name": "Slack OAuth2"
        }
      }
    }
  ],
  "connections": {
    "cron_trigger": {
      "main": [[{"node": "merge_triggers", "type": "main", "index": 0}]]
    },
    "manual_trigger": {
      "main": [[{"node": "merge_triggers", "type": "main", "index": 1}]]
    },
    "merge_triggers": {
      "main": [[
        {"node": "google_sheets", "type": "main", "index": 0},
        {"node": "fetch_tax_csv", "type": "main", "index": 0},
        {"node": "fetch_code_violations", "type": "main", "index": 0},
        {"node": "fetch_evictions", "type": "main", "index": 0},
        {"node": "fetch_probate", "type": "main", "index": 0},
        {"node": "fetch_provider_api", "type": "main", "index": 0}
      ]]
    },
    "google_sheets": {
      "main": [[{"node": "normalize_sheets", "type": "main", "index": 0}]]
    },
    "normalize_sheets": {
      "main": [[{"node": "merge_all_sources", "type": "main", "index": 0}]]
    },
    "fetch_tax_csv": {
      "main": [[{"node": "parse_tax_csv", "type": "main", "index": 0}]]
    },
    "parse_tax_csv": {
      "main": [[{"node": "merge_all_sources", "type": "main", "index": 1}]]
    },
    "fetch_code_violations": {
      "main": [[{"node": "normalize_violations", "type": "main", "index": 0}]]
    },
    "normalize_violations": {
      "main": [[{"node": "merge_all_sources", "type": "main", "index": 2}]]
    },
    "fetch_evictions": {
      "main": [[{"node": "parse_evictions", "type": "main", "index": 0}]]
    },
    "parse_evictions": {
      "main": [[{"node": "normalize_evictions", "type": "main", "index": 0}]]
    },
    "normalize_evictions": {
      "main": [[{"node": "merge_all_sources", "type": "main", "index": 3}]]
    },
    "fetch_probate": {
      "main": [[{"node": "normalize_probate", "type": "main", "index": 0}]]
    },
    "normalize_probate": {
      "main": [[{"node": "merge_all_sources", "type": "main", "index": 4}]]
    },
    "fetch_provider_api": {
      "main": [[{"node": "normalize_provider", "type": "main", "index": 0}]]
    },
    "normalize_provider": {
      "main": [[{"node": "merge_all_sources", "type": "main", "index": 5}]]
    },
    "merge_all_sources": {
      "main": [[{"node": "add_idempotency", "type": "main", "index": 0}]]
    },
    "add_idempotency": {
      "main": [[{"node": "loop_dedupe", "type": "main", "index": 0}]]
    },
    "loop_dedupe": {
      "main": [[{"node": "check_seen", "type": "main", "index": 0}]]
    },
    "check_seen": {
      "main": [[{"node": "if_new", "type": "main", "index": 0}]]
    },
    "if_new": {
      "main": [
        [{"node": "collect_new", "type": "main", "index": 0}],
        [{"node": "loop_dedupe", "type": "main", "index": 0}]
      ]
    },
    "collect_new": {
      "main": [[{"node": "batch_for_publish", "type": "main", "index": 0}]]
    },
    "batch_for_publish": {
      "main": [[{"node": "add_hmac", "type": "main", "index": 0}]]
    },
    "add_hmac": {
      "main": [[{"node": "rate_limit", "type": "main", "index": 0}]]
    },
    "rate_limit": {
      "main": [[{"node": "publish_to_scoring", "type": "main", "index": 0}]]
    },
    "publish_to_scoring": {
      "main": [[{"node": "mark_seen", "type": "main", "index": 0}]]
    },
    "mark_seen": {
      "main": [
        [{"node": "batch_for_publish", "type": "main", "index": 0}],
        [{"node": "tally_metrics", "type": "main", "index": 0}]
      ]
    },
    "tally_metrics": {
      "main": [[{"node": "slack_summary", "type": "main", "index": 0}]]
    },
    "slack_summary": {
      "main": [[{"node": "log_notifications", "type": "main", "index": 0}]]
    },
    "error_trigger": {
      "main": [[{"node": "slack_error", "type": "main", "index": 0}]]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 2,
  "updatedAt": "2025-01-16T00:00:00.000Z",
  "versionId": "01234567-89ab-cdef-0123-456789abcdef"
}